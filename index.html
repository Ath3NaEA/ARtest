<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebAR Camera Toggle</title>
  <script src="https://cdn.jsdelivr.net/npm/aframe@1.2.0/dist/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mind-ar/dist/mindar-aframe.min.js"></script>
</head>
<body>
  <a-scene mindar-image embedded>
    <a-assets>
      <video id="marker-video" src="your-video.mp4" loop></video>
    </a-assets>
    <a-camera id="main-camera" position="0 0 0" look-controls></a-camera>
    <a-entity mindar-image-target="targetIndex: 0">
      <a-video src="#marker-video" width="2" height="1"></a-video>
    </a-entity>
  </a-scene>

  <!-- カメラ切り替えボタン -->
  <button id="switch-camera" style="position: fixed; top: 20px; left: 20px; z-index: 100;">Switch Camera</button>

  <script>
    let currentCameraFacing = "user"; // 初期値としてフロントカメラ（インカメラ）
    const switchCameraButton = document.getElementById("switch-camera");

    switchCameraButton.addEventListener("click", () => {
      // 現在のカメラモードを切り替える
      currentCameraFacing = currentCameraFacing === "user" ? "environment" : "user";

      // カメラを再設定
      navigator.mediaDevices.getUserMedia({
        video: { facingMode: currentCameraFacing }
      }).then((stream) => {
        const videoTracks = stream.getVideoTracks();
        console.log("切り替え後のカメラ:", videoTracks[0].label);

        const videoElement = document.querySelector("video");
        if (videoElement) {
          videoElement.srcObject = stream;
        }
      }).catch((error) => {
        console.error("カメラの切り替えに失敗しました:", error);
      });
    });
  </script>
</body>
</html>
